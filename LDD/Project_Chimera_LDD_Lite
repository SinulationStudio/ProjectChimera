# Project Chimera - Mechanical Reference Document (lite)

**Focus:** Core Gameplay Loop & Combat Mechanics
**Engine:** Godot 4.x (Compatibility Renderer)
**Perspective:** First-Person (FMV/Video-Based)

---

## 1. The Core Loop (Roguelite Structure)

1. **The Hub:** Player spends meta-currency (`Refined Data` / `Sentience Points`) on Skill Trees to unlock cards, Implants, and Outfits. Selects Loadout ("Chassis") and Difficulty ("Act").
2. **The Run (Gauntlet):** Procedurally generated node map (~15-18 nodes).
* **Encounters:** Turn-based Sex Combat vs. NPCs.
* **Mid-Boss:** Guaranteed "Rival Encounter" (unlocks `Position:` cards).
* **Final Boss:** Act Boss.


3. **The Reward:**
* **Victory:** Gain `Raw Essence` (Shop currency).
* **Loss:** Run ends.


4. **Conversion:** Post-run, `Raw Essence` is converted to persistent Meta-Currency (Corporate vs. Rebel split) based on player choice.

---

## 2. Combat Mechanics (The Sex Battle)

### 2.1 Victory & Defeat Conditions

* **Victory:** Deplete NPC **Composure** to 0 (Character Climaxes).
* **Defeat:** Player **Composure** reaches 0.

### 2.2 The Defensive Hierarchy (Damage Logic)

Damage is applied sequentially through three layers.

1. **Layer 1: Focus (Shield)**
* **Source:** Generated by `Defensive` cards.
* **Behavior:** Absorbs all incoming damage.
* **Decay:** Halved (rounded down) at the end of the owner's turn.


2. **Layer 2: Inhibition (Armor)**
* **Source:** Persistent stat determined by **Outfit**.
* **Behavior:** Absorbs damage once Focus is depleted.
* **State Change:** Reaching 0 triggers **`Exposed`** state.


3. **Layer 3: Composure (Health)**
* **Source:** Core health pool.
* **Behavior:** Only takes damage if Focus and Inhibition are 0 (or if attack has `Piercing`).



### 2.3 The Arousal System (Shared Meter)

Replaces "Tension." Arousal is a status effect track (0-100) applied to both entities.

* **Application:** Cards apply `Arousal` to opponent (offensive) or `Self Arousal` (risk/cost).
* **Thresholds:** Crossing 33/66/100 triggers visual "Escalation States" and unlocks `Intimate` finishers.
* **Scaling:** The **`Amplify`** keyword scales damage based on current Arousal (e.g., `Amplify Arousal 2:1` = +2 dmg per 1 Arousal).
* **Decay:** Does *not* decay passively. Must be reduced by specific abilities.

### 2.4 Entity States

* **Guarded:** Active while **Inhibition > 0**.
* Provides damage reduction vs. Physical attacks (`Guarded [Upper]` / `Guarded [Lower]`).
* `Verbal` attacks bypass Guarded.


* **Exposed:** Active when **Inhibition == 0**.
* Removes all Guarded damage reduction.
* **Unlocks:** Allows usage of high-power `Intimate` cards.



### 2.5 Escalation (Visuals)

Combat has 4 visual phases based on an invisible `Intensity` tracker:

1. **Approach:** Neutral distance.
2. **Close Quarters:** Personal space entry.
3. **The Embrace:** Physical contact/holding.
4. **Intimacy:** Explicit sexual positioning (Requires `Exposed`).

---

## 3. The Card System

### 3.1 Hand & Deck Logic

* **Draw Rule:**
* Turn 1: Draw 5.
* Turn 2+: Draw until hand holds 5. If holding 5+, draw 1.


* **Discard Rule:** Full discard at end of turn (unless `Retain`).
* **Max Hand:** 10 Cards.

### 3.2 Card Types (Classifications)

1. **Technique:** Standard one-time effect.
2. **Position:** High-cost "Ultimate." transitions game to a sub-state/grapple phase.
3. **Mental:** Attacks `Composure` via psychological damage. Bypasses `Guard`.
4. **Physical [Zone]:** Attacks `Inhibition/Composure`. Penalized by `Guard`. Zones: `[Upper Body]`, `[Lower Body]`.
5. **Intimate:** High-damage finishers. usually requires target to be `Exposed`.
6. **Defensive:** Generates `Focus` or reduces `Self Arousal`.

### 3.3 Core Keywords

* **`Apply X Arousal`**: Add to target's meter.
* **`Amplify Arousal X:Y`**: Bonus effect X for every Y Arousal on target.
* **`Exhaust`**: Remove from play for remainder of encounter.
* **`Retain`**: Keep in hand at end of turn.

---

## 4. Entity Logic

### 4.1 Player Stats

* **Composure:** Run-Persistent Health (Upgrade via Meta-Tree).
* **Inhibition:** Run-Persistent Armor (Determined by **Outfit**). Regenerates to current threshold bracket between fights.
* **AP:** 3 per turn. Refills start of turn.

### 4.2 NPC Logic (Asymmetrical)

NPCs do **not** use cards. They use an Ability Pool driven by a Behavior Tree.

* **Tier 1 (Basic):** Random rotation of simple attacks/buffs.
* **Tier 2+ (Rivals/Bosses):** Uses "Build-Up" logic. Setup -> Telegraph -> Payoff.
* **Resources:** NPCs have their own `Composure`, `Inhibition`, and `Focus`. They share the `Arousal` track logic.

### 4.3 NPC Memory System (Dialogue Triggers)

Dialogue is triggered by 5 Indices:

1. **Encounter History:** (First meeting vs. Repeat).
2. **Gameplay Style:** (Dominant card type used previously).
3. **Allegiance:** (Corporate vs. Rebel rank).
4. **Player State:** (Current clothing/health status).
5. **World State:** (Major plot flags).

---

## 5. Technical Implementation (Godot)

### 5.1 Rendering & Assets

* **Renderer:** Godot Compatibility (OpenGL 3.3).
* **Visual Style:** "Cinematic Turn" using Pre-rendered Video (`.webm`).
* `Neutral_Loop.webm`: Idle state.
* `Action_Clips.webm`: Triggered by card plays.


* **GenAI Pipeline:** 1. Base Image (LoRA) ->
2. Image-to-Video (Runway/WAN/Pika) ->
3. Post-Process (Looping/Color) ->
4. Godot `VideoStreamPlayer`.

### 5.2 UI Layout (HUD)

* **Center:** NPC Video Feed + NPC Status Bars (Comp/Inhib/Guard).
* **Bottom:** Card Hand (Fan) + AP Pips.
* **Periphery:** Player Vitals (Left) + Arousal Meter (Right).
* **Style:** Diegetic "Cybernetic Visor" overlay.

### 5.3 Essential Addons

* **`Dialogue Manager`:** For branching NPC interactions.
* **`TweenAnimator`:** For smooth UI transitions.
* **`Godot Game Settings`:** For standard options menus.

---

## 6. Balancing KPIs (Simulation Targets)

* **Average Encounter Time:** ~5 Minutes (~7 Turns).
* **Run Time:** 60-75 Minutes.
* **Economy:** Offense should be more AP-efficient than Defense (proactive play).
* **Difficulty Curve:**
* *Tactician (Avg Player):* 50% Win Rate baseline.
* *Virtuoso (Pro Player):* High win rate via exploiting `Guard` weaknesses and `Amplify` scaling.
